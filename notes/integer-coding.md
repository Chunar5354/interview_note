计算机中的原码，反码与补码

所有的数据在计算机中都是以二进制存储的，对于数据的运算，计算机中`只有加法没有减法`，所以减法就被等效成一个`正数+负数`

原码，反码与补码的设计就是为了解决负数的表示以及加减法问题

## 原码

原码最简单，用最高位表示符号，0为正，1为负，低位表示绝对值，以4位二进制数为例：

```
0 = 0000, -0 = 1000
1 = 0001, -1 = 1001
2 = 0010, -2 = 1010
3 = 0011, -3 = 1011
4 = 0100, -4 = 1100
5 = 0101, -5 = 1101
6 = 0110, -6 = 1110
7 = 0111, -7 = 1111
```

原码表示有两个问题：

- 1.0的表示方法不唯一

- 2.负数的计算会出错，如`2-1 = 2 + (-1) = 0010 + 1001 = 1011 = -3`

## 反码

反码是在原码的基础上改进的，将负数的表示改变为：原码的`符号位不变，其余按位取反`，正数的表示`与源码相同`

```
0 = 0000, -0 = 1111
1 = 0001, -1 = 1110
2 = 0010, -2 = 1101
3 = 0011, -3 = 1100
4 = 0100, -4 = 1011
5 = 0101, -5 = 1010
6 = 0110, -6 = 1001
7 = 0111, -7 = 1000
```

这样在计算减法的时候：`2-1 = 2 + (-1) = 0010 + 1110 = 10000`, 将`溢出位`添加到末尾，就变成了`0001 = 1`，这样就实现了减法

但是反码仍然没有解决`+0与-0不唯一`的问题

## 补码

补码的设计采用了`取余`或`时钟`的思想

对于时钟来说，2点钟倒退一个小时与前进十一个小时指向的都是1点钟

对于给定长度的整数，与时钟是相似的，比如，对于4位二进制数，最大容量是`2^4 = 16`，则`2-1 = 2+16-1 = 2+15`（溢出位舍去），这样就成功的将减法表示成了加法

于是问题转换成`怎样得到减数对应的加数`，就是上面的问题中，如何根据`-1`得到`15`，将这种表示方式称为`补码`

对于以二进制位表示的整数，补码的计算方式有很多，常用的有两种（正数的补码等于原码本身）：

- 1.符号位不变，原码按位取反（反码）再加1

- 2.符号位不变，原码从`右向左第一个为1的位`开始，`左侧的所有位按位取反`（包含第一个为1的位），`右侧不变`

```
0 = 0000,
1 = 0001, -1 = 1111
2 = 0010, -2 = 1110
3 = 0011, -3 = 1101
4 = 0100, -4 = 1100
5 = 0101, -5 = 1011
6 = 0110, -6 = 1010
7 = 0111, -7 = 1001
          -8 = 1000
```

按照补码的计算方式，`-0 = 1000`的补码是`0000 = 0`，这样就解决了0不唯一的问题，而且多出来的`-1000`可以用来表示-8

补码的减法：`2-1 = 2 + (-1) = 0010 + 1111 = 0001 = 1`，解决了减法问题
