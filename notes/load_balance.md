## 常见的负载均衡算法

- 1.轮询法

将请求按顺序轮流的分配到服务器上

- 2.随机法

使用系统的随机算法，在服务器列表中随机选取一个

- 3.源地址哈希法

根据客户端的IP地址计算一个哈希值，对服务器列表取模运算，找到目标服务器

在服务器列表不变的情况下可以保证相同的客户端总是由相同的服务器处理

- 4.加权轮询法

根据服务器处理负载能力的不同赋予不同的权重，为配置高的服务器分配更多的请求

- 5.加权随机法

与加权轮询法类似

- 6.最小连接数法

动态地选取当前积压连接数最小号的一台服务器来分配请求，尽可能地提高利用效率

## nginx的负载均衡算法

nginx的负载均衡是基于`应用层`的转发，在第七层

nginx的负载均衡算法有：

- 1.轮询（默认）

与上面的相同

- 2.加权轮询

权重越高访问率越高

```
upstream backend {  
  server 192.168.0.11 weight=10;  
  server 192.168.0.12 weight=10;  
}
```

- 3.基于IP的哈希

按照目的IP地址的哈希值分配

```
upstream backend {
    ip_hash;
    server 192.168.0.11:12345;  
    server 192.168.0.12:23456;  
}
```

- 4.按照服务器的响应时间，最短优先分配

```
upstream backend {
    server server1;  
    server server2;
    fair;  
}
```

- 5.按照访问url的哈希值来分配

```
upstream backend {  
  server server1:12345;  
  server server2:23456;  
  hash $request_uri;  
  hash_method crc32;  
}
```

其中fair和url_hash方法需要安装第三方插件